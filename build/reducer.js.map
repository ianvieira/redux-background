{"version":3,"sources":["../src/reducer.js"],"names":["reducer","state","action","type","payload","meta","name","item","times","active","running","startedOn","finishedOn","lastRanOn","lastDuration","stoppedOn","value","error","progress","timeoutId","time","newItem","Date","now","newState"],"mappings":"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","file":"reducer.js","sourcesContent":["import { JOB_ADDED, JOB_STARTED, JOB_PROGRESS, JOB_FINISHED, JOB_STOPPED, JOB_REMOVE, JOB_TIMEOUT_ID } from './types';\n\nexport default function reducer(state = {}, action) {\n  switch (action.type) {\n    case JOB_ADDED: {\n      const { payload, meta } = action;\n      const { name } = payload;\n      const item = {\n        times: 0,\n        active: true,\n        running: false,\n        startedOn: null,\n        finishedOn: null,\n        lastRanOn: null,\n        lastDuration: null,\n        stoppedOn: null,\n        value: null,\n        error: null,\n        progress: null,\n        timeoutId: null,\n        ...meta,\n      };\n      return { ...state, [name]: item };\n    }\n    case JOB_STARTED: {\n      const { payload, meta } = action;\n      const { name } = payload;\n      const { time } = meta;\n      const item = state[name];\n      const newItem = {\n        ...item,\n        running: true,\n        startedOn: time,\n        progress: 0,\n      };\n      return { ...state, [name]: newItem };\n    }\n    case JOB_PROGRESS: {\n      const { payload, meta } = action;\n      const { name } = payload;\n      const { progress } = meta;\n      const item = state[name];\n      const newItem = { ...item, progress };\n      if (item.running) {\n        return { ...state, [name]: newItem };\n      }\n      return state;\n    }\n    case JOB_FINISHED: {\n      const { payload, meta, error } = action;\n      const { name, value } = payload;\n      const { times } = meta;\n      const item = state[name];\n      const lastRanOn = item.startedOn;\n      const finishedOn = Date.now();\n      const lastDuration = Date.now() - item.startedOn;\n      const newItem = {\n        ...item,\n        times,\n        running: false,\n        startedOn: null,\n        finishedOn,\n        lastRanOn,\n        lastDuration,\n        value,\n        error,\n        progress: 100,\n      };\n      return { ...state, [name]: newItem };\n    }\n    case JOB_STOPPED: {\n      const { payload } = action;\n      const { name } = payload;\n      const item = state[name];\n      const stoppedOn = Date.now();\n      const newItem = {\n        ...item,\n        active: false,\n        running: false,\n        stoppedOn,\n        progress: null,\n      };\n      return { ...state, [name]: newItem };\n    }\n    case JOB_REMOVE: {\n      const { payload } = action;\n      const { name } = payload;\n      const newState = { ...state };\n      delete newState[name];\n      return newState;\n    }\n    case JOB_TIMEOUT_ID: {\n      const { payload, meta } = action;\n      const { name } = payload;\n      const { timeoutId } = meta;\n      const item = state[name];\n      const newItem = { ...item, timeoutId };\n      return { ...state, [name]: newItem };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n"]}