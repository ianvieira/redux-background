{"version":3,"sources":["../src/middleware.js"],"names":["tickers","middleware","action","type","payload","name","fn","options","meta","store","dispatch","getState","clear","next"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,UAAU,EAAhB;AACA,IAAMC,aAAa,SAAbA,UAAa;AAAA,SAAS;AAAA,WAAQ,UAACC,MAAD,EAAY;AAAA,UACtCC,IADsC,GAC7BD,MAD6B,CACtCC,IADsC;;AAE9C,cAAQD,OAAOC,IAAf;AACE;AAAc;AAAA,kCACSD,OAAOE,OADhB;AAAA,gBACJC,IADI,mBACJA,IADI;AAAA,gBACEC,EADF,mBACEA,EADF;;AAEZ,gBAAMC,UAAUL,OAAOM,IAAvB;AACA,gBAAI,CAACR,QAAQK,IAAR,CAAL,EAAoB;AAClBL,sBAAQK,IAAR,IAAgB,sBAAaI,MAAMC,QAAnB,EAA6BD,MAAME,QAAnC,EAA6CN,IAA7C,EAAmDC,EAAnD,EAAuDC,OAAvD,GAAhB;AACD;AACD;AACD;AACD;AACA;AACA;AAAiB;AAAA,gBACPF,KADO,GACEH,OAAOE,OADT,CACPC,IADO;;AAEf,gBAAMO,QAAQT,0BAAd;AACA,gBAAIH,QAAQK,KAAR,CAAJ,EAAmB;AACjBL,sBAAQK,KAAR,EAAcO,KAAd;AACAZ,sBAAQK,KAAR,IAAgB,IAAhB;AACD;AACD;AACD;AACD;AAAS;AACP;AACD;AAtBH;AAwBAQ,WAAKX,MAAL;AACD,KA3B2B;AAAA,GAAT;AAAA,CAAnB;;kBA6BeD,U","file":"middleware.js","sourcesContent":["import { JOB_ADD, JOB_STOP, JOB_STOPPED, JOB_REMOVE } from './types';\nimport createTicker from './ticker';\n\nconst tickers = {};\nconst middleware = store => next => (action) => {\n  const { type } = action;\n  switch (action.type) {\n    case JOB_ADD: {\n      const { name, fn } = action.payload;\n      const options = action.meta;\n      if (!tickers[name]) {\n        tickers[name] = createTicker(store.dispatch, store.getState, name, fn, options)();\n      }\n      break;\n    }\n    case JOB_STOP:\n    case JOB_STOPPED:\n    case JOB_REMOVE: {\n      const { name } = action.payload;\n      const clear = type === JOB_REMOVE;\n      if (tickers[name]) {\n        tickers[name](clear);\n        tickers[name] = null;\n      }\n      break;\n    }\n    default: {\n      break;\n    }\n  }\n  next(action);\n};\n\nexport default middleware;\n"]}